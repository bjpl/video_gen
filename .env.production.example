# Production Environment Configuration
# Copy this file to .env and update with your production values

# ============================================================================
# Deployment Environment
# ============================================================================
ENVIRONMENT=production

# ============================================================================
# Security Headers Configuration
# ============================================================================

# Enable security headers (should always be true in production)
SECURITY_HEADERS_ENABLED=true

# ============================================================================
# HTTPS & HSTS Configuration
# ============================================================================

# Enable HTTPS redirect (redirect all HTTP to HTTPS)
HTTPS_REDIRECT_ENABLED=true

# HTTPS port (usually 443)
HTTPS_REDIRECT_PORT=443

# HSTS (HTTP Strict Transport Security) max age in seconds
# Default: 31536000 (1 year)
# Recommended: At least 31536000 (1 year) for production
HSTS_MAX_AGE=31536000

# Include subdomains in HSTS policy
HSTS_INCLUDE_SUBDOMAINS=true

# Enable HSTS preload (requires submission to Chrome's preload list)
# Only enable if you understand the implications
HSTS_PRELOAD=false

# ============================================================================
# Content Security Policy (CSP)
# ============================================================================

# Use CSP in report-only mode (logs violations but doesn't block)
# Set to false for production enforcement
CSP_REPORT_ONLY=false

# CSP violation report endpoint (optional)
# Example: https://your-domain.com/api/csp-report
CSP_REPORT_URI=

# ============================================================================
# Rate Limiting Configuration
# ============================================================================

# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Default rate limit for most endpoints
RATE_LIMIT_DEFAULT=100/minute

# Strict limits for resource-intensive operations
RATE_LIMIT_UPLOAD=5/minute
RATE_LIMIT_GENERATE=3/minute

# Moderate limits for parsing operations
RATE_LIMIT_PARSE=10/minute

# High limits for polling/status endpoints
RATE_LIMIT_TASKS=60/minute
RATE_LIMIT_HEALTH=1000/minute

# ============================================================================
# CSRF Protection
# ============================================================================

# CSRF secret key (generate with: python -c "import secrets; print(secrets.token_hex(32))")
CSRF_SECRET=your-random-secret-key-here

# Disable CSRF protection (NOT recommended for production)
# CSRF_DISABLED=false

# ============================================================================
# Error Tracking (Sentry)
# ============================================================================

# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Sentry environment
SENTRY_ENVIRONMENT=production

# ============================================================================
# Application Configuration
# ============================================================================

# API Keys (if needed)
ANTHROPIC_API_KEY=your-api-key-here

# Database configuration (if applicable)
# DATABASE_URL=postgresql://user:password@host:port/dbname

# Redis configuration for rate limiting (recommended for production)
# REDIS_URL=redis://localhost:6379/0

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format
LOG_FORMAT=json  # Options: json, text

# ============================================================================
# CORS Configuration (if needed)
# ============================================================================

# Allowed origins for CORS (comma-separated)
# CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# ============================================================================
# Server Configuration
# ============================================================================

# Server host (use 0.0.0.0 for production)
HOST=0.0.0.0

# Server port
PORT=8000

# Number of worker processes (recommended: 2 * CPU cores + 1)
WORKERS=4

# ============================================================================
# Production Deployment Checklist
# ============================================================================
#
# [ ] Set ENVIRONMENT=production
# [ ] Enable HTTPS on reverse proxy/load balancer
# [ ] Configure SSL/TLS certificates
# [ ] Set HTTPS_REDIRECT_ENABLED=true
# [ ] Generate and set CSRF_SECRET
# [ ] Configure SENTRY_DSN for error tracking
# [ ] Set appropriate rate limits
# [ ] Review and configure CSP policy
# [ ] Test security headers: curl -I https://your-domain.com
# [ ] Check /api/security/status endpoint
# [ ] Run security tests: pytest app/tests/test_security_headers.py
# [ ] Monitor logs for security warnings
#
